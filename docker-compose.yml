version: '3.8'
services:
  frontend:
    image: zaknafain/rpg-master-frontend:1.0.0-SNAPSHOT
    volumes:
    - type: bind
      source: ../rpg-master-frontend
      target: /rpg-master-frontend
    ports:
      - "4200:4200"
    depends_on:
      - api

  api:
    image: zaknafain/rpg-master-api:1.0.0
    volumes:
    - type: bind
      source: ../rpg-master-api
      target: /rpg-master-api
    depends_on:
      - db
    env_file:
    - ../rpg-master-api/.env

  db:
    image: postgres:9.6.18-alpine
    env_file:
    - .env
    volumes:
      - ./tmp/db:/var/lib/postgresql/data
